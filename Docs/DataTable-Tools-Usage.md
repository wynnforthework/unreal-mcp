# 数据表工具使用指南

## 📋 工具概述

数据表工具是 Unreal MCP 中专门用于管理游戏数据的核心组件。通过这个工具，您可以创建和管理虚幻引擎的数据表（DataTable），存储游戏中的各种数据，如物品信息、角色属性、关卡数据等。这个工具让您能够通过自然语言命令来构建和管理复杂的游戏数据系统。

## 🎯 主要功能

### 1. 数据表创建
- 创建新的数据表资源
- 设置数据表的结构和属性
- 配置数据表的存储路径
- 定义数据表的描述信息

### 2. 行数据管理
- 添加新的数据行
- 更新现有数据行
- 删除指定的数据行
- 查询数据行信息

### 3. 属性映射
- 自动处理 GUID 属性映射
- 支持复杂的数据类型
- 提供属性查询功能
- 确保数据一致性

### 4. 数据查询
- 获取所有数据行
- 查询特定数据行
- 获取数据表结构信息
- 分析数据表内容

## 🚀 使用示例

### 创建物品数据表

**自然语言命令：**
```
"创建一个名为 ItemTable 的数据表，使用 ItemStruct 结构体，路径为 /Game/Data，描述为 '游戏物品数据表'"
```

**AI 执行过程：**
1. 调用 `create_datatable` 函数
2. 设置数据表名称为 "ItemTable"
3. 设置行结构体为 "ItemStruct"
4. 设置路径为 "/Game/Data"
5. 设置描述为 "游戏物品数据表"
6. 创建数据表资源

### 添加物品数据

**自然语言命令：**
```
"在 ItemTable 数据表中添加一个物品：名称为 'Sword'，价格为 100，攻击力为 50，类型为 'Weapon'"
```

**AI 执行过程：**
1. 调用 `get_datatable_row_names` 获取属性名称
2. 解析属性映射关系
3. 调用 `add_rows_to_datatable` 函数
4. 创建数据行：
   - row_name: "Sword"
   - row_data: {Name: "Sword", Price: 100, Attack: 50, Type: "Weapon"}
5. 添加到数据表中

### 查询物品信息

**自然语言命令：**
```
"从 ItemTable 数据表中获取所有物品信息"
```

**AI 执行过程：**
1. 调用 `get_datatable_rows` 函数
2. 设置数据表路径为 "/Game/Data/ItemTable"
3. 获取所有数据行
4. 返回完整的物品列表

## 📝 详细命令参考

### 数据表创建命令

| 命令类型 | 示例 | 说明 |
|---------|------|------|
| 基础数据表 | "创建数据表 ItemTable" | 创建简单的数据表 |
| 指定结构体 | "创建使用 ItemStruct 的数据表" | 指定行数据结构 |
| 自定义路径 | "在 /Game/Data 路径创建数据表" | 设置存储路径 |
| 添加描述 | "创建数据表并添加描述" | 设置数据表说明 |

### 数据操作命令

| 操作类型 | 示例 | 说明 |
|---------|------|------|
| 添加行 | "添加物品数据行" | 创建新的数据行 |
| 更新行 | "更新物品价格" | 修改现有数据 |
| 删除行 | "删除指定物品" | 移除数据行 |
| 查询行 | "获取所有物品" | 读取数据信息 |

### 属性管理命令

| 属性类型 | 示例 | 说明 |
|---------|------|------|
| 获取属性 | "获取数据表属性列表" | 查看结构信息 |
| 设置属性 | "设置物品属性值" | 配置数据字段 |
| 查询属性 | "查询物品价格属性" | 获取特定字段 |
| 验证属性 | "验证数据完整性" | 检查数据格式 |

## 🎮 实际应用场景

### 1. 物品系统
```
"创建完整的物品系统：武器数据表、防具数据表、消耗品数据表，包含属性、价格、描述等信息"
```

### 2. 角色系统
```
"创建角色数据表：包含角色名称、等级、属性、技能、装备槽位等信息"
```

### 3. 关卡系统
```
"创建关卡数据表：包含关卡名称、难度、奖励、敌人配置、环境设置等信息"
```

### 4. 商店系统
```
"创建商店数据表：包含商品列表、价格、库存、折扣、购买条件等信息"
```

## 🔧 高级功能

### 1. 批量数据操作
```
"批量导入物品数据：从 CSV 文件导入 100 个物品，自动设置属性和分类"
```

### 2. 数据验证
```
"验证数据表完整性：检查必填字段、验证数据类型、确保数据一致性"
```

### 3. 数据备份
```
"备份数据表：创建数据表副本、导出数据文件、支持版本管理"
```

### 4. 数据同步
```
"同步数据表：在多个数据表之间同步数据、保持数据一致性"
```

## ⚠️ 注意事项

### 1. 结构体要求
- 数据表必须基于有效的结构体
- 结构体字段必须支持序列化
- 注意字段类型和命名规范

### 2. 属性映射
- 使用 GUID 属性名称进行数据操作
- 先查询属性列表再设置数据
- 确保属性名称的正确性

### 3. 数据一致性
- 保持数据类型的一致性
- 避免重复的行名称
- 及时验证数据完整性

## 🔧 故障排除

### 常见问题

1. **数据表创建失败**
   - 检查结构体是否存在
   - 确认路径是否有效
   - 验证结构体字段设置

2. **数据添加失败**
   - 确认属性名称正确
   - 检查数据类型匹配
   - 验证行名称唯一性

3. **数据查询失败**
   - 确认数据表路径正确
   - 检查行名称是否存在
   - 验证查询参数格式

### 调试技巧

1. **使用查询功能**
   - 先查询数据表结构
   - 确认属性映射关系
   - 验证数据格式

2. **分步操作**
   - 逐步添加数据行
   - 验证每个步骤结果
   - 及时处理错误

3. **数据验证**
   - 定期检查数据完整性
   - 验证数据类型正确性
   - 确保数据一致性

## 📚 进阶用法

### 1. 动态数据表
```
"创建动态数据表系统：根据游戏进度动态添加数据、支持运行时修改"
```

### 2. 数据表关联
```
"创建关联数据表：物品表关联商店表、角色表关联装备表"
```

### 3. 数据表继承
```
"实现数据表继承：基础物品表、武器表继承物品表、添加武器特有属性"
```

### 4. 数据表版本控制
```
"实现数据表版本控制：记录修改历史、支持数据回滚、版本比较"
```

## 🎯 最佳实践

### 1. 数据设计
- 使用清晰的数据结构
- 合理设计字段类型
- 保持数据规范化

### 2. 命名规范
- 使用一致的命名约定
- 避免使用特殊字符
- 保持命名可读性

### 3. 数据管理
- 定期备份重要数据
- 及时清理无用数据
- 保持数据一致性

### 4. 性能优化
- 合理使用数据表大小
- 避免过度复杂的数据结构
- 优化查询性能

## 🔍 实用技巧

### 1. 快速数据导入
```
"使用模板快速导入数据：选择数据模板、批量导入数据、自动验证格式"
```

### 2. 数据表模板
```
"创建数据表模板：标准物品模板、角色模板、关卡模板"
```

### 3. 数据表工具
```
"开发数据表工具：数据编辑器、批量操作工具、数据验证工具"
```

### 4. 数据表监控
```
"实现数据表监控：数据变化检测、异常数据报警、性能监控"
```

## 📊 数据结构示例

### 物品结构体示例
```cpp
USTRUCT(BlueprintType)
struct FItemData
{
    GENERATED_BODY()
    
    UPROPERTY(EditAnywhere, BlueprintReadWrite)
    FString Name;
    
    UPROPERTY(EditAnywhere, BlueprintReadWrite)
    int32 Price;
    
    UPROPERTY(EditAnywhere, BlueprintReadWrite)
    FString Type;
    
    UPROPERTY(EditAnywhere, BlueprintReadWrite)
    FString Description;
};
```

### 角色结构体示例
```cpp
USTRUCT(BlueprintType)
struct FCharacterData
{
    GENERATED_BODY()
    
    UPROPERTY(EditAnywhere, BlueprintReadWrite)
    FString Name;
    
    UPROPERTY(EditAnywhere, BlueprintReadWrite)
    int32 Level;
    
    UPROPERTY(EditAnywhere, BlueprintReadWrite)
    int32 Health;
    
    UPROPERTY(EditAnywhere, BlueprintReadWrite)
    int32 Attack;
};
```

---

通过数据表工具，您可以构建强大的游戏数据管理系统，让 AI 助手帮助您快速创建和管理复杂的游戏数据，提高开发效率和数据质量。
