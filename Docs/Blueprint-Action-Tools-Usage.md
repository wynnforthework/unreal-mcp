# 蓝图动作工具使用指南

## 📋 工具概述

蓝图动作工具是 Unreal MCP 中最智能的组件之一，它能够动态发现虚幻引擎中所有可用的蓝图动作和函数，并智能地创建相应的节点。这个工具让您能够探索引擎的完整功能，找到最适合的节点来构建您的游戏逻辑。

## 🎯 主要功能

### 1. 动态动作发现
- 根据引脚类型发现可用动作
- 按类名搜索相关函数
- 探索完整的类继承层次
- 搜索现有蓝图动作

### 2. 智能节点创建
- 使用发现的动作名称创建节点
- 自动处理复杂的节点类型
- 支持特殊节点（如 Cast、ForEach 等）
- 智能参数配置

### 3. 引脚信息分析
- 获取节点的详细引脚信息
- 了解引脚的类型要求
- 分析引脚的必要性和用途

### 4. 类层次探索
- 查看类的完整继承链
- 发现继承的功能
- 理解类的功能范围

## 🚀 使用示例

### 发现特定类型的动作

**自然语言命令：**
```
"查找所有可以连接到 PlayerController 对象引用的动作"
```

**AI 执行过程：**
1. 调用 `get_actions_for_pin` 函数
2. 设置 `pin_type` 为 "object"
3. 设置 `pin_subcategory` 为 "PlayerController"
4. 返回所有可用的动作列表，包括：
   - Get Player Controller
   - Get Controlled Pawn
   - Get Player Camera Manager
   - 等等...

### 搜索特定功能的动作

**自然语言命令：**
```
"搜索所有与移动相关的动作"
```

**AI 执行过程：**
1. 调用 `search_blueprint_actions` 函数
2. 设置 `search_query` 为 "move"
3. 返回匹配的动作，包括：
   - Add Movement Input
   - Get Movement Component
   - Set Movement Mode
   - 等等...

### 创建智能节点

**自然语言命令：**
```
"在 PlayerCharacter 蓝图中创建一个 Map ForEach 循环节点"
```

**AI 执行过程：**
1. 调用 `create_node_by_action_name` 函数
2. 设置 `function_name` 为 "For Each Loop (Map)"
3. 自动创建 Map ForEach 节点
4. 设置节点位置和参数

## 📝 详细命令参考

### 动作发现命令

| 命令类型 | 示例 | 说明 |
|---------|------|------|
| 按引脚类型 | "查找 float 类型的动作" | 发现可连接到浮点引脚的函数 |
| 按类名 | "查找 PlayerController 类的动作" | 发现特定类的所有函数 |
| 按层次 | "查找 Pawn 及其父类的所有动作" | 探索完整的继承功能 |
| 按关键词 | "搜索包含 'damage' 的动作" | 搜索特定功能的函数 |

### 节点创建命令

| 节点类型 | 示例 | 说明 |
|---------|------|------|
| 函数调用 | "创建 Get Actor Location 节点" | 调用引擎内置函数 |
| 循环节点 | "创建 For Each Loop 节点" | 创建循环结构 |
| 转换节点 | "创建 Cast to PlayerController 节点" | 类型转换 |
| 自定义事件 | "创建自定义事件 OnPlayerDied" | 创建事件节点 |

### 引脚信息命令

| 信息类型 | 示例 | 说明 |
|---------|------|------|
| 引脚详情 | "获取 Create Widget 节点的 Class 引脚信息" | 了解引脚要求 |
| 可用引脚 | "列出 Print String 节点的所有引脚" | 查看完整引脚列表 |
| 引脚类型 | "检查 Get Actor Location 的返回值类型" | 确认数据类型 |

## 🎮 实际应用场景

### 1. 玩家控制系统开发
```
"查找所有与玩家移动相关的动作，然后在 PlayerCharacter 中创建相应的节点"
```

### 2. UI 系统构建
```
"搜索所有 Widget 创建相关的动作，创建主菜单 UI 系统"
```

### 3. 游戏机制实现
```
"查找所有伤害系统相关的动作，实现敌人 AI 的攻击逻辑"
```

### 4. 数据管理
```
"搜索所有数据表操作相关的动作，创建物品管理系统"
```

## 🔧 高级功能

### 1. 类层次探索
```
"探索 Character 类的完整功能，包括所有继承的方法"
```

### 2. 智能参数配置
```
"创建 Cast to PlayerController 节点，自动配置目标类型"
```

### 3. 批量节点创建
```
"在 PlayerCharacter 中创建完整的移动控制系统：Get Movement Component -> Set Max Walk Speed -> Set Max Acceleration"
```

### 4. 复杂逻辑构建
```
"创建完整的伤害系统：OnTakeDamage -> Get Damage Amount -> Subtract from Health -> Branch (Health <= 0) -> Call OnDeath"
```

## ⚠️ 注意事项

### 1. 动作名称规范
- 使用引擎中的标准动作名称
- 注意大小写和空格
- 某些特殊节点有特定的命名格式

### 2. 引脚类型匹配
- 确保引脚类型兼容
- 注意对象引用的类型要求
- 验证数组和结构体的类型匹配

### 3. 性能考虑
- 避免在 Tick 中创建复杂节点
- 合理使用搜索功能，避免过度查询
- 及时清理未使用的节点

## 🔧 故障排除

### 常见问题

1. **动作搜索失败**
   - 检查搜索关键词是否正确
   - 确认类名拼写无误
   - 验证引脚类型是否支持

2. **节点创建失败**
   - 确认动作名称存在
   - 检查蓝图是否已编译
   - 验证节点类型是否支持

3. **引脚连接失败**
   - 检查引脚类型是否匹配
   - 确认节点在同一个图表中
   - 验证连接规则

### 调试技巧

1. **使用搜索功能**
   - 先用搜索找到合适的动作
   - 查看动作的详细描述
   - 确认动作的参数要求

2. **检查引脚信息**
   - 获取节点的引脚详情
   - 了解引脚的类型和用途
   - 确认连接的正确性

3. **测试节点功能**
   - 创建简单的测试节点
   - 验证节点的基本功能
   - 逐步构建复杂逻辑

## 📚 进阶用法

### 1. 动态系统构建
```
"根据玩家输入动态创建相应的动作节点：WASD 移动、鼠标视角控制、跳跃动作"
```

### 2. 智能 AI 系统
```
"为敌人 AI 创建智能行为系统：感知玩家 -> 计算路径 -> 移动攻击 -> 返回巡逻"
```

### 3. 复杂 UI 交互
```
"创建完整的 UI 交互系统：按钮点击 -> 播放音效 -> 切换界面 -> 更新数据"
```

### 4. 数据驱动系统
```
"构建数据驱动的游戏系统：读取配置 -> 动态创建对象 -> 设置属性 -> 启动逻辑"
```

## 🎯 最佳实践

### 1. 探索优先
- 先使用搜索功能了解可用动作
- 查看动作的详细说明和参数
- 理解动作的使用场景

### 2. 模块化设计
- 将复杂逻辑拆分为多个动作
- 使用自定义事件组织代码
- 保持节点图的清晰结构

### 3. 错误处理
- 在关键节点添加类型检查
- 使用 Branch 节点处理异常情况
- 设置合理的默认值

### 4. 性能优化
- 避免在循环中创建复杂节点
- 合理使用缓存和变量
- 及时清理未使用的资源

## 🔍 实用搜索技巧

### 1. 按功能搜索
```
"搜索所有与 'spawn' 相关的动作"  // 生成对象
"搜索所有与 'destroy' 相关的动作"  // 销毁对象
"搜索所有与 'get' 相关的动作"      // 获取信息
"搜索所有与 'set' 相关的动作"      // 设置属性
```

### 2. 按类型搜索
```
"搜索所有 'Vector' 类型的动作"    // 向量操作
"搜索所有 'Boolean' 类型的动作"   // 布尔操作
"搜索所有 'Array' 类型的动作"     // 数组操作
"搜索所有 'Struct' 类型的动作"    // 结构体操作
```

### 3. 按组件搜索
```
"搜索所有 'Camera' 相关的动作"    // 摄像机操作
"搜索所有 'Light' 相关的动作"     // 光源操作
"搜索所有 'Audio' 相关的动作"     // 音频操作
"搜索所有 'Particle' 相关的动作"  // 粒子操作
```

---

通过蓝图动作工具，您可以探索虚幻引擎的完整功能，让 AI 助手帮助您找到最适合的节点和函数，构建强大而灵活的游戏系统。
